/*
 FlexSearch v0.6.1
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(l,F,G){let x;(x=G.define)&&x.amd?x([],function(){return F}):(x=G.modules)?x[l.toLowerCase()]=F:"object"===typeof exports?module.exports=F:G[l]=F})("FlexSearch",function(){function l(b,a){const c=a?a.id:b&&b.id;this.id=c||0===c?c:aa++;this.init(b,a);x(this,"index",function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)});x(this,"length",function(){return this.index.length})}function F(b,a){const c=b.length,d=H(a),f=[];for(let m=0,g=0;m<c;m++){const c=
b[m];if(d&&a(c)||!d&&!a[c])f[g++]=c}return f}function G(b,a,c,d,f,m,g,h,p,e){c=V(c,g?0:f,!1,!1,a,p,e);let n;h&&(h=c.page,n=c.next,c=c.result);if(g)b=this.where(g,null,f,c);else{b=c;a=this.g;c=b.length;f=Array(c);for(m=0;m<c;m++)f[m]=a[b[m]];b=f}c=b;d&&(H(d)||(y=d.split(":"),1<y.length?d=ba:(y=y[0],d=ca)),c.sort(d));return c=I(h,n,c)}function x(b,a,c){Object.defineProperty(b,a,{get:c})}function e(b){return new RegExp(b,"g")}function J(b,a){for(let c=0;c<a.length;c+=2)b=b.replace(a[c],a[c+1]);return b}
function P(b,a,c,d,f,m,g,h){if(a[c])return a[c];f=f?(h-(g||h/1.5))*m+(g||h/1.5)*f:m;a[c]=f;f>=g&&(b=b[h-(f+.5>>0)],b=b[c]||(b[c]=[]),b[b.length]=d);return f}function S(b,a){if(b){const c=Object.keys(b);for(let d=0,f=c.length;d<f;d++){const f=c[d],g=b[f];if(g)for(let c=0,d=g.length;c<d;c++)if(g[c]===a){1===d?delete b[f]:g.splice(c,1);break}else K(g[c])&&S(g[c],a)}}}function T(b){let a="",c="";var d="";for(let f=0;f<b.length;f++){const m=b[f];if(m!==c)if(f&&"h"===m){if(d="a"===d||"e"===d||"i"===d||
"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=m}else a+=m;d=f===b.length-1?"":b[f+1];c=m}return a}function da(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function ca(b,a){b=b[y];a=a[y];return b<a?-1:b>a?1:0}function ba(b,a){const c=y.length;for(let d=0;d<c;d++)b=b[y[d]],a=a[y[d]];return b<a?-1:b>a?1:0}function I(b,a,c){return b?{page:b,next:a?""+a:null,result:c}:c}function V(b,a,c,d,f,m,g){let h,p=[],e;const n=b.length;!0===c?(c="0",e=""):e=c&&c.split(":");
if(1<n){const u=A();let R=[],M,D;var q=-1,k;let t;var Q=!0;let C,B=0,v,y,w;e&&(2===e.length?(w=e,e=!1):e=parseInt(e[0],10));if(g){for(M=A();++q<n;)if("not"===f[q])for(D=b[q],t=D.length,k=0;k<t;)M["@"+D[k++]]=1;else y=q+1;if(N(y))return I(c,h,p);q=-1}else v=E(f)&&f;let x;for(;++q<n;){const L=q===(y||n)-1;if(!v||!q)if((k=v||f&&f[q])&&"and"!==k)if("or"===k)x=!1;else continue;else x=m=!0;D=b[q];if(t=D.length){if(Q)if(C){var r=C.length;for(k=0;k<r;){Q=C[k++];var l="@"+Q;g&&M[l]||(u[l]=1,m||(p[B++]=Q))}C=
null;Q=!1}else{C=D;continue}l=!1;for(k=0;k<t;){r=D[k++];var z="@"+r;const b=m?u[z]:q;if(!(!b||g&&M[z]||!m&&u[z]))if(b===q){if(L){if(!e||--e<B)if(p[B++]=r,a&&B===a)return I(c,B,p)}else u[z]=q+1;l=!0}else d&&(z=R[b]||(R[b]=[]),z[z.length]=r)}if(x&&!l&&!d)break}else if(x&&!d)return I(c,h,D)}if(C)if(q=C.length,g)for(k=e?parseInt(e,10):0;k<q;){if(b=C[k++],!M["@"+b]&&(!e||--e<B)&&(p[B++]=b,a&&B===a))return I(c,k,p)}else p=C;if(d)for(B=p.length,w?(q=parseInt(w[0],10)+1,k=parseInt(w[1],10)):(q=R.length,k=
0);q--;)if(r=R[q]){for(t=r.length;k<t;k++)if(d=r[k],!g||!M["@"+d])if(p[B++]=d,a&&B===a)return I(c,q+":"+k,p);k=0}}else n&&(f&&"not"===f[0]||(p=b[0]));a&&(g=c?parseInt(c,10):0,h=g+a,h<p.length?p=p.slice(g,h):g&&(p=p.slice(g)));return I(c,h,p)}function E(b){return"string"===typeof b}function w(b){return b.constructor===Array}function H(b){return"function"===typeof b}function K(b){return"object"===typeof b}function N(b){return"undefined"===typeof b}function W(b){const a=Array(b);for(let c=0;c<b;c++)a[c]=
A();return a}function A(){return Object.create(null)}const v={encode:"icase",c:"forward",split:/\W+/,cache:!1,async:!1,u:!1,m:!1,a:!1,b:9,threshold:0,depth:0},X={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",threshold:8,b:9,depth:1}},U=[];
let aa=0;const Y={},Z={};l.create=function(b){return new l(b)};l.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&U.push(e(a),b[a]);return this};l.registerEncoder=function(b,a){O[b]=a.bind(O);return this};l.registerLanguage=function(b,a){Y[b]=a.filter;Z[b]=a.stemmer;return this};l.encode=function(b,a){return O[b](a)};l.prototype.init=function(b,a){this.o=[];if(a){var c=a.preset;b=a}else b||(b=v),c=b.preset;a={};E(b)?(a=X[b],b={}):c&&(a=X[c]);this.c=b.tokenize||a.c||this.c||v.c;this.split=
b.split||this.split||v.split;this.m=b.rtl||this.m||v.m;this.async="undefined"===typeof Promise||N(c=b.async)?this.async||v.async:c;this.threshold=N(c=b.threshold)?a.threshold||this.threshold||v.threshold:c;this.b=N(c=b.resolution)?c=a.b||this.b||v.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth="strict"!==this.c||N(c=b.depth)?a.depth||this.depth||v.depth:c;this.i=(c=N(c=b.encode)?a.encode||v.encode:c)&&O[c]&&O[c].bind(O)||(H(c)?c:this.i||!1);(c=b.matcher)&&this.addMatcher(c);if(c=b.filter){E(c)&&
(c=Y[c]);if(w(c)){a=this.i;var d=A();for(var f=0;f<c.length;f++){var m=a?a(c[f]):c[f];d[m]=1}c=d}this.filter=c}if(c=b.stemmer){var g;a=E(c)?Z[c]:c;d=this.i;f=[];for(g in a)a.hasOwnProperty(g)&&(m=d?d(g):g,f.push(e(m+"($|\\W)"),d?d(a[g]):a[g]));this.stemmer=g=f}this.a=d=(c=b.doc)?c:this.a||v.a;this.l=W(this.b-(this.threshold||0));this.h=A();this.f=A();if(d&&(this.g=A(),b.doc=null,g=d.index={},c=d.keys=[],a=d.field,w(d.id)||(d.id=d.id.split(":")),a)){let e;w(a)||(K(a)?(e=a,d.field=a=Object.keys(a)):
d.field=a=[a]);for(d=0;d<a.length;d++)f=a[d],w(f)||(e&&(b=e[f]),c[d]=f,a[d]=f.split(":")),g[f]=new l(b),g[f].g=this.g}return this};l.prototype.encode=function(b){b&&U.length&&(b=J(b,U));b&&this.o.length&&(b=J(b,this.o));b&&this.i&&(b=this.i(b));b&&this.stemmer&&(b=J(b,this.stemmer));return b};l.prototype.addMatcher=function(b){const a=this.o;for(const c in b)b.hasOwnProperty(c)&&a.push(e(c),b[c]);return this};l.prototype.add=function(b,a,c,d,f){if(this.a&&K(b))return this.j("add",b,a);if(a&&E(a)&&
(b||0===b)){var e="@"+b;if(this.f[e]&&!d)return this.update(b,a);if(!f){if(this.async&&"function"!==typeof importScripts){let f=this;e=new Promise(function(c){setTimeout(function(){f.add(b,a,null,d,!0);f=null;c()})});if(c)e.then(c);else return e;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);if(!a.length)return this;c=this.c;f=H(c)?c(a):a.split(this.split);this.filter&&(f=F(f,this.filter));const m=A();m._ctx=A();const k=f.length,l=this.threshold,r=this.depth,t=this.b,z=
this.l,L=this.m;for(let a=0;a<k;a++){var g=f[a];if(g){var h=g.length,p=(L?a+1:k-a)/k,u="";switch(c){case "reverse":case "both":for(var n=h;--n;)u=g[n]+u,P(z,m,u,b,L?1:(h-n)/h,p,l,t-1);u="";case "forward":for(n=0;n<h;n++)u+=g[n],P(z,m,u,b,L?(n+1)/h:1,p,l,t-1);break;case "full":for(n=0;n<h;n++){const a=(L?n+1:h-n)/h;for(let c=h;c>n;c--)u=g.substring(n,c),P(z,m,u,b,a,p,l,t-1)}break;default:if(h=P(z,m,g,b,1,p,l,t-1),r&&1<k&&h>=l)for(h=m._ctx[g]||(m._ctx[g]=A()),g=this.h[g]||(this.h[g]=W(t-(l||0))),p=
a-r,u=a+r+1,0>p&&(p=0),u>k&&(u=k);p<u;p++)p!==a&&P(g,h,f[p],b,0,t-(p<a?a-p:p-a),l,t-1)}}}this.f[e]=1}return this};l.prototype.j=function(b,a,c){if(w(a))for(let d=0,f=a.length;d<f;d++){if(d===f-1)return this.j(b,a[d],c);this.j(b,a[d])}else{const m=this.a.index,l=this.a.keys;var d=this.a.tag,f=this.a.id;let n;let q;for(var e=0;e<f.length;e++)n=(n||a)[f[e]];if(d){for(f=0;f<d.length;f++){var g=d[f];var h=g.split(":");for(e=0;e<h.length;e++)q=(q||a)[h[e]];q="@"+q}h=this.s[g];h=h[q]||(h[q]=[])}if("remove"===
b){delete this.g[n];for(let a=0,b=l.length;a<b;a++){if(a===b-1)return m[l[a]].remove(n,c);m[l[a]].remove(n)}}f=this.a.field;h&&(h[h.length]=a);this.g[n]=a;for(let e=0,h=f.length;e<h;e++){d=f[e];let k;for(g=0;g<d.length;g++)k=(k||a)[d[g]];d=m[l[e]];g="add"===b?d.add:d.update;if(e===h-1)return g.call(d,n,k,c);g.call(d,n,k)}}};l.prototype.update=function(b,a,c){if(this.a&&K(b))return this.j("update",b,a);this.f["@"+b]&&E(a)&&(this.remove(b),this.add(b,a,c,!0));return this};l.prototype.remove=function(b,
a,c){if(this.a&&K(b))return this.j("remove",b,a);var d="@"+b;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=0;a<this.b-(this.threshold||0);a++)S(this.l[a],b);this.depth&&S(this.h,b);delete this.f[d]}return this};let y;l.prototype.search=function(b,a,c,d){if(K(a)){if(w(a))for(var f=0;f<a.length;f++)a[f].query=
b;else a.query=b;b=a;a=0}let e=[],g=b;let h,l,u;if(K(b)&&!w(b)){(c=b.callback||H(a)&&a)&&(g.callback=null);l=b.sort;h=!1;a=b.limit;var n=b.threshold;u=!1;b=b.query}if(this.a){n=this.a.index;var q=g.bool||"or",k=g.field;let m=q;let p,t;if(k)w(k)||(k=[k]);else if(w(g)){var v=g;k=[];m=[];for(var r=0;r<g.length;r++)d=g[r],f=d.bool||q,k[r]=d.field,m[r]=f,"not"===f?p=!0:"and"===f&&(t=!0)}else k=this.a.keys;q=k.length;for(r=0;r<q;r++)v&&(g=v[r]),h&&!E(g)&&(g.page=null,g.limit=0),e[r]=n[k[r]].search(g,0);
if(c)return c(G.call(this,b,m,e,l,a,u,!1,h,t,p));if(this.async){const c=this;return new Promise(function(d){Promise.all(e).then(function(e){d(G.call(c,b,m,e,l,a,u,!1,h,t,p))})})}return G.call(this,b,m,e,l,a,u,!1,h,t,p)}n||(n=this.threshold||0);H(a)?(c=a,a=1E3):a||0===a||(a=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;n=new Promise(function(c){setTimeout(function(){c(b.search(g,a,null,!0));b=null})});if(c)n.then(c);else return n;return this}if(c)return c(this.search(g,a,
null,!0)),this}if(!b||!E(b))return e;g=b;g=this.encode(g);if(!g.length)return e;c=this.c;c=H(c)?c(g):g.split(this.split);this.filter&&(c=F(c,this.filter));v=c.length;d=!0;f=[];const t=A();1<v&&(this.depth?(k=!0,r=c[0],t[r]=1):c.sort(da));if(!k||(q=this.h)[r]){const a=this.b;for(let b=k?1:0;b<v;b++){const e=c[b];if(e){if(!t[e]){const b=[];let c=!1,g=0;if(r=k?q[r]:this.l){let d;for(let f=0;f<a-n;f++)if(d=r[f][e])b[g++]=d,c=!0}if(c)f[f.length]=1<g?b.concat.apply([],b):b[0];else{d=!1;break}t[e]=1}r=e}}}else d=
!1;d&&(e=V(f,a,h,!1));return e};l.prototype.clear=function(){return this.destroy().init()};l.prototype.destroy=function(){this.l=this.h=this.f=null;if(this.a){const b=this.a.keys;for(let a=0;a<b.length;a++)this.a.index[b[a]].destroy();this.a=this.g=null}return this};const O={icase:function(b){return b.toLowerCase()},simple:function(){const b=[e("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",e("[\u00e8\u00e9\u00ea\u00eb]"),"e",e("[\u00ec\u00ed\u00ee\u00ef]"),"i",e("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),
"o",e("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",e("[\u00fd\u0177\u00ff]"),"y",e("\u00f1"),"n",e("\u00e7"),"c",e("\u00df"),"s",e(" & ")," and ",e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){a=J(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[e("ae"),"a",e("ai"),"ei",e("ay"),"ei",e("ey"),"ei",e("oe"),"o",e("ue"),"u",e("ie"),"i",e("sz"),"s",e("zs"),"s",e("sh"),"s",e("ck"),"k",e("cc"),"k",e("dt"),"t",e("ph"),"f",e("pf"),"f",e("ou"),"o",e("uo"),"u"];return function(a,
c){if(!a)return a;a=this.simple(a);2<a.length&&(a=J(a,b));c||1<a.length&&(a=T(a));return a}}(),extra:function(){const b=[e("p"),"b",e("z"),"s",e("[cgq]"),"k",e("n"),"m",e("d"),"t",e("[vw]"),"f",e("[aeiouy]"),""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+J(d.substring(1),b))}a=a.join(" ");a=T(a)}return a}}(),balance:function(){const b=[e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){return T(J(a.toLowerCase(),
b))}}()};return l}(!1),this);
